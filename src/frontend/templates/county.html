<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration by County - NC Elections Transparency Project</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <nav>
        <div class="container">
            <a href="{{ url_for('index') }}" class="logo">NC ELECTIONS TRANSPARENCY</a>
            <ul class="nav-links">
                <li><a href="{{ url_for('index') }}#about">About</a></li>
                <li><a href="{{ url_for('index') }}#data">Data</a></li>
            </ul>
        </div>
    </nav>

    <header class="page-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="{{ url_for('index') }}">← Back to Home</a>
            </div>
            <h1>Geographic Distribution</h1>
            <p class="tagline">Voter registration across North Carolina's 100 counties</p>
        </div>
    </header>

    <main>
        {% if chart_exists %}
        <section class="detail-section">
            <div class="container">
                <div class="detail-grid">
                    <div class="detail-chart">
                        <img src="{{ url_for('serve_chart', filename='county_choropleth.png') }}" 
                             alt="County Registration Map"
                             class="chart-image-large">
                    </div>

                    <div class="detail-info">
                        <h2>County-Level Analysis</h2>
                        <p>
                            This choropleth map visualizes voter registration density across all 
                            100 North Carolina counties. Darker shading indicates higher numbers 
                            of registered voters, revealing the geographic distribution of the 
                            state's electorate and highlighting regional differences in registration 
                            patterns.
                        </p>

                        <div class="info-grid">
                            {% if stats %}
                            <div class="stats-panel">
                                <h3>Geographic Overview</h3>
                                <div class="stat-item">
                                    <span class="stat-label">Total Counties</span>
                                    <span class="stat-value">{{ stats.total_counties }}</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Total Registered</span>
                                    <span class="stat-value">{{ "{:,}".format(stats.total_registered) }}</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Largest County</span>
                                    <span class="stat-value">{{ stats.top_county }}</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Top County Count</span>
                                    <span class="stat-value">{{ "{:,}".format(stats.top_count) }}</span>
                                </div>
                            </div>
                            {% endif %}

                            <div>
                                <div class="insight-box">
                                    <h3>Urban Concentration</h3>
                                    <p>
                                        Urban counties along the I-85 corridor—including Mecklenburg (Charlotte), 
                                        Wake (Raleigh), Durham, and Guilford (Greensboro)—consistently show the 
                                        highest registration numbers due to population density. These four counties 
                                        alone account for a substantial portion of the state's total registered voters.
                                    </p>
                                </div>

                                <div class="insight-box">
                                    <h3>Rural vs. Urban Patterns</h3>
                                    <p>
                                        Rural counties in eastern and western North Carolina have lower absolute 
                                        registration numbers but may demonstrate high participation rates relative 
                                        to population. The urban-rural divide reflects broader demographic and 
                                        economic patterns across the state.
                                    </p>
                                </div>

                                <div class="insight-box">
                                    <h3>Population Context</h3>
                                    <p>
                                        Raw registration numbers directly correlate with population size. Urban 
                                        growth in the Triangle and Charlotte metro areas over recent decades has 
                                        significantly increased their share of the state's electorate, shifting 
                                        the balance of electoral power toward these metropolitan regions.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="coming-soon">
            <div class="container">
                <h2>Expanding Geographic Analysis</h2>
                <p>We're developing comprehensive tools for deeper geographic analysis of voter registration:</p>
                <ul>
                    <li>Precinct-level registration maps with granular geographic detail</li>
                    <li>County party distribution breakdowns showing political composition</li>
                    <li>Urban vs. rural registration pattern comparisons</li>
                    <li>Registration growth rates by county over multiple election cycles</li>
                    <li>Interactive county comparison tools for side-by-side analysis</li>
                    <li>Demographic composition breakdowns by county</li>
                    <li>Population-adjusted registration rates for normalized comparisons</li>
                    <li>Regional clustering analysis identifying geographic voting blocs</li>
                </ul>
            </div>
        </section>
        {% else %}
        <section class="detail-section">
            <div class="container">
                <div class="alert alert-warning">
                    <strong>Visualization Not Available</strong>
                    <p>The county choropleth map has not been generated yet. Please run the visualization scripts to create this analysis.</p>
                </div>
            </div>
        </section>
        {% endif %}
    </main>

    <footer>
        <div class="container">
            <p>
                Data source: 
                <a href="https://www.ncsbe.gov/" target="_blank" rel="noopener">
                    NC State Board of Elections
                </a>
            </p>
            <p>&copy; 2026 NC Elections Transparency Project</p>
        </div>
    </footer>
</body>
</html>